<%- include('../shared/includes/head' , {title:"Financial Statement- Moneyy"})%>
<link rel="stylesheet" href="/styles/home-page.css">
<link rel="stylesheet" href="/styles/statement.css">
  </head>
  <body>
   <%- include("../shared/includes/header")%>
   <main>
       <h1 class="title">Financial Statement</h1>
       <section class="statement">
        <div class="statement-header">
            <p>Account Number: <%=accountDetails.accountNumber%></p>
            <p>Account Holder Name: <%=userData.name%></p>
            <p>Current Balance: <%=accountDetails.balance%></p>

            <h2>Statement Period: <%=firstTransactionDate%> - <%=lastTransactionDate%></h2>
        </div>
                <div class="statement-body">
                        <table>
                            <thead>
                                <tr>
                                    <th scope="col">Date</th>
                                    <th scope="col">Type</th>
                                    <th scope="col">Counterpart</th>
                                    <th scope="col">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% for (const t of transactions) { %>
                                <tr>
                                    <td><%= t.formattedDate %></td>
                                    <td><%= t.transactionType %> (<%= t.senderAccountNumber === accountDetails.accountNumber ? 'Sent' : 'Received' %>)</td>
                                    <td><%= t.counterpartName || (t.senderAccountNumber === accountDetails.accountNumber ? t.receiverAccountNumber : t.senderAccountNumber) || '-' %></td>
                                    <td><%= t.amount %></td>
                                </tr>
                                <% } %>
                            </tbody>
                        </table>
                </div>
        <div class="statement-footer">
            <p>Generated on: <%=currentDate%></p>
        </div>
    </section>
    <a id="download-button" href="/statement/generate-pdf">Download PDF</a>
    </main>
<%- include("../shared/includes/footer")%>
